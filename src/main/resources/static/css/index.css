:root {
    --section-height: 20vh;
    --movie-hero-h: 100vh;    /* {changed} фон на всю высоту первого экрана */
    --poster-height: 330px;  /* базовая высота постера */
}

/* Используем динамические единицы высоты экрана, когда доступны (мобилки) */
@supports (height: 1dvh) {
    :root { --movie-hero-h: 100dvh; } /* {changed} */
}
@supports (height: 1svh) {
    :root { --movie-hero-h: 100svh; } /* {changed} */
}

html, body {
    margin: 0;
    padding: 0;
    min-height: 100%; /* было height: 100% */
    /* убран overflow: auto; чтобы документ мог расти и нормально скроллиться */
    color: white;
    font-family: system-ui, sans-serif;
    background: #111827;
}

/* отступ под фиксированный фон — оставляем */
body {
    padding-top: var(--movie-hero-h);
    /* {added} флаг, если нужно стилизовать состояние между hero и контентом */
}
body[data-hero-scroll="active"] {
    /* можно затемнить фон или добавить эффекты при желании */
    /* transition: background-color .4s ease; */
}

/*** КАРУСЕЛЬ  ***/

/* Контейнер со всеми секциями */
#carousel {
    width: 100%;
    height: 100%;
    transition: transform 0.3s cubic-bezier(0.65, 0, 0.35, 1);
    will-change: transform;
}

#carousel:focus {
    outline: none;
    border: none;
}

.year-section {
    width: 100%;
    height: var(--section-height);
    display: flex;
    align-items: center;
    justify-content: center;
    box-sizing: border-box;
}

.year {
    font-size: 6.5rem;
    font-weight: 800;
    opacity: 0.3;
    transition: opacity 0.2s ease, transform 0.2s ease;
    cursor: pointer;
    user-select: none;
}

.year.active {
    opacity: 1;
    transform: scale(1.05);
}

.year.prev,
.year.next {
    opacity: 0.35;
    transform: translateZ(-40px) scale(0.8) rotateX(2deg);
    z-index: 1;
}
.year.prev-prev,
.year.next-next {
    opacity: 0.15;
    z-index: 1;
}

/* можно чуть сместить сверху/снизу для усиления перспективы */
.year.prev { transform: translateY(-4%) translateZ(-40px) scale(0.8) rotateX(7deg); }
.year.next { transform: translateY(4%) translateZ(-40px) scale(0.8) rotateX(-7deg); }

/* можно чуть сместить сверху/снизу для усиления перспективы */
.year.prev-prev {
    transform: translateY(-7%) translateZ(-70px) scale(0.5) rotateX(17deg);
}
.year.next-next {
    transform: translateY(7%) translateZ(-70px) scale(0.5) rotateX(-17deg);
}

.fade-in {
    animation: fadeIn 1s ease forwards;
}
@keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
}

.hint {
    position: absolute;
    bottom: 2rem;
    left: 0;
    right: 0;
    text-align: center;
    color: #888;
    font-size: 0.9rem;
}

/* Небольшая тень/разделение между секциями для видимости */
.year-section + .year-section {
    margin-top: 0.5rem;
}

/*** СПИСОК ФИЛЬМОВ ***/

/* Плавная прокрутка для правой колонки с фильмами */
#movies-list {
    /* ручная плавная прокрутка через JS — отключаем нативный smooth */
    scroll-behavior: auto;
    -webkit-overflow-scrolling: touch;
}

/* Стили полосы прокрутки — WebKit (Chrome, Edge, Safari) */
#movies-list::-webkit-scrollbar {
    width: 10px;
}
#movies-list::-webkit-scrollbar-track {
    background: transparent;
}
#movies-list::-webkit-scrollbar-thumb {
    background-color: rgba(255,255,255,0.06); /* тёмный полупрозрачный */
    border-radius: 8px;
    border: 2px solid transparent; /* чтобы создать отступ */
    background-clip: padding-box;
}
#movies-list::-webkit-scrollbar-thumb:hover {
    background-color: rgba(255,255,255,0.10);
}

/* Firefox */
#movies-list {
    scrollbar-width: thin;
    scrollbar-color: rgba(255,255,255,0.06) transparent;
}

/* Альтернативные мелкие улучшения для UX */
#movies-list:focus {
    outline: none;
}

/* Плавное появление/исчезновение содержимого в #movies-list */
.fade-target {
    transition: opacity 250ms ease-in;
    opacity: 1;
}
.fade-out { opacity: 0; }
.fade-in  { opacity: 1; }

/* Стили карточек фильмов */
.movie-card {
    border: 1px solid rgba(255,255,255,0.03);
    box-shadow: 0 4px 10px rgba(2,6,23,0.6);
    position: relative; /* чтобы backdrop был внутри карточки */
    overflow: hidden;   /* скрыть нижнюю половину backdrop'а */
}

/* backdrop: верхняя половина карточки с затемненным задником */
.movie-card .backdrop {
    position: absolute;
    left: 0;
    right: 0;
    top: 0;
    height: 50%; /* верхняя половина карточки */
    background-size: cover;
    background-position: center;
    filter: brightness(0.25);
    z-index: 0;
    /* только верхние углы скруглены, чтобы совпадать с карточкой */
    border-top-left-radius: 12px;
    border-top-right-radius: 12px;
}

/* содержимое карточки поверх backdrop'а */
.movie-card .poster,
.movie-card .content {
    position: relative;
    z-index: 1;
}

/* небольшая тёмная градиентная подложка над backdrop для читаемости текста (опционально) */
.movie-card::before {
    content: "";
    position: absolute;
    left: 0; right: 0; top: 0;
    height: 50%;
    background: linear-gradient(to bottom, rgba(0,0,0,0.35), rgba(0,0,0,0.45));
    z-index: 0;
    pointer-events: none;
}

/* ограничение текста описания: 5 строки с многоточием */
.description {
    display: -webkit-box;
    -webkit-box-orient: vertical;
    -webkit-line-clamp: 5;
    overflow: hidden;
}

.movie-card .original-title {
    font-style: italic;
    color: #cbd5e1; /* neutral-300 */
}

.movie-card .russian-title {
    color: #fff;
    line-height: 1;
}

.rating-badge {
    min-width: 56px;
    justify-content: center;
    font-family: "JetBrains Mono";
}

/* метки рейтингов: KP и IMDb — простая цветовая дифференциация */
.rating-badge .kp {
    color: #4ef383;
}    /* amber */
.rating-badge .imdb { color: #24fbf4; }  /* yellow */

/* иконки источников рейтингов */
.rating-source-icon {
    width: 72px;      /* {changed} больше ширина для читаемости логотипов */
    height: auto;     /* {changed} естественная пропорция */
    opacity: .9;
    transition: opacity .25s ease, transform .25s ease;
    filter: drop-shadow(0 4px 10px rgba(0,0,0,0.55));
}
.rating-source-icon:hover {
    opacity: 1;
    transform: translateY(-2px);
}
.kp-icon { color: #ff7a00; }       /* фирменный оранжевый оттенок */
.imdb-icon { color: #f5c518; }     /* классический IMDb жёлтый */

/* жанры */
.genres span {
    display: inline-block;
    padding: 0.18rem 0.45rem;
    background: rgba(255,255,255,0.03);
    border-radius: 9999px;
    margin-right: 0.35rem;
    color: #9ca3af; /* neutral-400 */
    font-size: 0.78rem;
}

/* предотвращаем разрастание текста в карточке */
.movie-card .titles { min-width: 0; }

/* --- Movie page backdrop / overlay --- */

/* фиксированный фон — занимает верхнюю часть экрана и остаётся на месте при скролле */
.movie-backdrop {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: var(--movie-hero-h);
    background-size: cover;
    background-position: center;  /* {changed} якорим по верху, без «пустоты» */
    background-repeat: no-repeat;
    z-index: 0;
    transform: translateZ(0);
    will-change: transform, filter; /* добавлено transform сюда для оптимизации */
    /* Плавность трансформаций для параллакса */
    transition: transform 200ms cubic-bezier(0.2,0.8,0.2,1);
    transform-origin: center center;
    filter: blur(0px) saturate(70%);
    opacity: 0.8;
}

/* Новый overlay: низ задника размывается и плавно переходит в тёмную часть */
.movie-backdrop-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    /* увеличиваем на пару пикселей, чтобы перекрыть низ задника без зазора на мобильных */
    height: calc(var(--movie-hero-h) + 36px);
    z-index: 1;
    pointer-events: none;

    /* опустили точки градиента */
    /*background: linear-gradient(to bottom, #0f172a00 0%, #0f172a 92%, #0f172a 100%);*/
}

/* Размытие применяем маской — сильнее внизу, прозрачно сверху */
.movie-backdrop-overlay::before {
    content: "";
    position: fixed;
    inset: 0;
    height: calc(var(--movie-hero-h) + 12px);
    backdrop-filter: blur(14px) saturate(115%);
    -webkit-backdrop-filter: blur(14px) saturate(115%);
    mask-image: linear-gradient(to bottom,
    rgba(23,23,23,0) 0%,
    rgba(23,23,23,0.45) 75%,
    rgba(23,23,23,1) 100%);
    -webkit-mask-image: linear-gradient(to bottom,
    rgba(23,23,23,0) 0%,
    rgba(23,23,23,0.45) 75%,
    rgba(23,23,23,1) 100%);
}

.movie-logo {
    /*background: #7fffd71a;*/
    /*border-radius: 50px;*/
    padding: 4rem;
    /*backdrop-filter: blur(5px);*/
}

.movie-landing-actor-list {
    font-family: Verdana, serif;
}

/* Стиль больших имён актёров */
.actor-name {
    font-family: 'Jura','Roboto Mono',system-ui,sans-serif;
    font-weight: 300;
    letter-spacing: 0.5px;
    text-shadow: 0 3px 12px rgba(0,0,0,0.5);
    color: #fff;
    text-shadow: 0 3px 14px rgba(0,0,0,0.7), 0 0 2px rgba(0,0,0,0.55);
}

.movie-rating {
    font-family: 'Jura','Roboto Mono',system-ui,sans-serif;
}

/* Слоган под логотипом — особый шрифт и аккуратная типографика */
.movie-tagline {
    font-style: italic;
    font-weight: 300;
    color: rgba(255,255,255,0.92);
    /* адаптивный размер: от 1rem до 1.6rem */
    font-size: clamp(1rem, 2.2vw, 1.6rem);
    line-height: 1.15;
    letter-spacing: 0.2px;
    text-shadow: 0 6px 20px rgba(0,0,0,0.6);
    max-width: 48rem;
    margin: 0 auto;
}

/* Специальный тон для слогана, когда он размещён сверху */
.movie-hero-overlay .movie-tagline {
    margin-top: 0;           /* на всякий случай убрать дополнительный отступ */
    opacity: 0.98;
    max-width: 60ch;
}

/* Мелкая адаптация для очень узких экранов — сохраняем тот же визуальный переход */
@media (max-width: 640px) {
    /* Дополнительно дублируем поведение на мобилках (на случай специфики браузеров) */
    .movie-backdrop { background-position: top center; } /* { changed code } */
    .movie-backdrop-overlay {
        background: linear-gradient(
            to bottom,
            rgba(23,23,23,0) 0%,
            rgba(23,23,23,0.45) 75%,
            rgba(23,23,23,1) 100%
        );
    }
    .movie-backdrop-overlay::before {
        mask-image: linear-gradient(to bottom,
        rgba(23,23,23,0) 0%,
        rgba(23,23,23,0.45) 75%,
        rgba(23,23,23,1) 100%);
        -webkit-mask-image: linear-gradient(to bottom,
        rgba(23,23,23,0) 0%,
        rgba(23,23,23,0.45) 75%,
        rgba(23,23,23,1) 100%);
    }
}

/* Fallback без поддержки backdrop-filter — оставим только затемнение градиентом */
@supports not ((backdrop-filter: blur(1px)) or (-webkit-backdrop-filter: blur(1px))) {
    .movie-backdrop-overlay::before {
        display: none;
    }
}

/* === Overlay контент поверх задника (переписан на Tailwind: старые правила удалены) === */
/* Было:
.movie-hero-content { ... }
.hero-poster { ... }
.hero-title { ... }
.hero-title-main { ... }
.hero-title-original { ... }
@media (...) { ... }
*/

/* Оставляем только тени для текста (используются вместе с Tailwind классами) */
.hero-title-main {
    text-shadow: 0 6px 22px rgba(0,0,0,0.55);
    font-family: 'Roboto', Jura, sans-serif;
}
.hero-title-original {
    text-shadow: 0 4px 14px rgba(0,0,0,0.45);
}

/* Новый: оверлей с логотипом/названием не должен перехватывать скролл/тач */
.movie-hero-overlay {
    pointer-events: none;
}

/* === Контент страницы фильма под фоном === */
.movie-body {
    position: relative;
    z-index: 2;
    /* Убрано: предотвращение схлопывания через border и сдвиг через margin-top — больше не нужно */
    /* border-top: 1px solid transparent; */
    /* margin-top: calc(var(--movie-hero-h) - 1px); */
    /*background-color: #0f172a;*/
    padding: 5rem 0 4rem;
    border-top: #7fffe8 1px solid;
    backdrop-filter: blur(35px) saturate(0.5) brightness(0.92);
}

/* Панель для списка актёров: читаемо на любом фоне */
.actor-panel {
    background: linear-gradient(145deg, rgba(0,0,0,0.65) 0%, rgba(0,0,0,0.45) 60%, rgba(0,0,0,0.40) 100%);
    backdrop-filter: blur(4px);
    -webkit-backdrop-filter: blur(4px);
    padding: 1rem 1.25rem;
    border-radius: 14px;
    box-shadow: 0 6px 24px rgba(0,0,0,0.55), inset 0 0 0 1px rgba(255,255,255,0.06);
    overflow-y: auto;
}

/* Горизонтальная лента актёров */
.actor-strip {
    display: flex;
    gap: 1.5rem;
    overflow-x: auto;
    padding-bottom: 0.75rem;
    scroll-snap-type: x mandatory;
    mask-image: linear-gradient(to right, transparent, rgb(0 0 0 / 85%) 0%, rgb(0 0 0 / 85%) 99%, transparent);
}
.actor-strip::-webkit-scrollbar {
    height: 8px;
}
.actor-strip::-webkit-scrollbar-track {
    background: transparent;
}
.actor-strip::-webkit-scrollbar-thumb {
    background: rgba(255,255,255,0.08);
    border-radius: 6px;
}
.actor-item {
    flex: 0 0 auto;
    width: 120px;
    scroll-snap-align: start;
    text-align: center;
}
@media (min-width: 640px) {
    .actor-item { width: 130px; }
}
.actor-photo {
    width: 100%;
    aspect-ratio: 2 / 3;
    object-fit: cover;
    border-radius: 0.9rem;
    box-shadow: 0 6px 18px rgba(0,0,0,0.55);
    background: #0f172a;
}
.actor-photo-fallback {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    aspect-ratio: 2 / 3;
    border-radius: 0.9rem;
    background: linear-gradient(135deg,#1e293b,#0f172a);
    font-size: 2.2rem;
    font-weight: 600;
    color: #fff;
    box-shadow: 0 6px 18px rgba(0,0,0,0.55);
}
.actor-character {
    font-size: 0.65rem;
    letter-spacing: 0.08em;
    text-transform: uppercase;
    color: rgba(255,255,255,0.55);
    margin-top: 0.25rem;
}

/* Сетка кредитов (режиссёр, сценарий, оператор, композитор, бюджет) */
.credit-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit,minmax(240px,1fr));
    gap: 1rem 1.25rem;
    background: linear-gradient(135deg, rgba(255,255,255,0.03), rgba(255,255,255,0.015));
    padding: 1.1rem 1.25rem 0.9rem;
    border: 1px solid rgba(255,255,255,0.05);
    border-radius: 18px;
    backdrop-filter: blur(6px);
    -webkit-backdrop-filter: blur(6px);
}
.credit-grid > div {
    display: flex;
    flex-direction: column;
    gap: 0.18rem;
    min-width: 0;
}
.credit-label {
    font-size: 0.65rem;
    letter-spacing: 0.18em;
    text-transform: uppercase;
    font-weight: 600;
    color: rgba(255,255,255,0.5);
}
.credit-value {
    font-size: 0.95rem;
    font-weight: 500;
    line-height: 1.25;
    color: rgba(255,255,255,0.92);
    text-shadow: 0 2px 10px rgba(0,0,0,0.45);
    white-space: normal;
    word-wrap: break-word;
}

/* Адаптив */
@media (min-width: 1024px) {
    .credit-value { font-size: 1rem; }
}
@media (max-width: 480px) {
    .credit-grid {
        grid-template-columns: 1fr;
        padding: 0.9rem 1rem 0.75rem;
        border-radius: 14px;
    }
}

/* {added} Левый столбец режиссёров (фиксированный) */
.director-column {
    /* убираем жёсткий фикс, даём место для центрирования блока с фото */
    flex: 0 0 auto;
    max-width: 220px;             /* сохраняем максимум, но не заставляем растягиваться */
    padding-right: 0.75rem;
    border-right: 1px solid rgba(255,255,255,0.12);
    display: flex;
    align-items: center;
    justify-content: center;      /* центрируем внутренний блок */
}

/* Контейнер каждого режиссёра — фиксированная ширина (соответствует actor-item) */
/* Фото режиссёра — те же пропорции и стили, что и у актёров, но с фиксированной шириной */
.director-photo {
    width: 100%;
    height: auto;
    aspect-ratio: 2 / 3;
    object-fit: cover;
    border-radius: 0.9rem;
    box-shadow: 0 6px 18px rgba(0,0,0,0.55);
    background: #0f172a;
    display: block;
}

/* Фолбэк для фото режиссёра — совпадает с актёрским */
.director-photo-fallback {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    aspect-ratio: 2 / 3;
    border-radius: 0.9rem;
    background: linear-gradient(135deg,#1e293b,#0f172a);
    font-size: 2.2rem;
    font-weight: 600;
    color: #fff;
    box-shadow: 0 6px 18px rgba(0,0,0,0.55);
}

/* === Hero meta & countries pills (добавлено) === */
.hero-meta-item {
    color: rgba(255,255,255,0.92);
    text-shadow: 0 3px 12px rgba(0,0,0,0.5);
    letter-spacing: .5px;
}
.hero-meta-sep {
    color: rgba(255,255,255,0.35);
    font-weight: 600;
    transform: translateY(-1px);
}
.hero-countries .country-pill {
    padding: 0.35rem 0.7rem;
    font-weight: 700;
    font-size: 1rem;
    line-height: 1;
    letter-spacing: .05em;
    /*border-radius: 9999px;*/
    /*background: linear-gradient(145deg, rgba(255,255,255,0.10), rgba(255,255,255,0.05));*/
    color: rgb(209 209 209 / 85%);
    backdrop-filter: blur(4px) saturate(140%);
    -webkit-backdrop-filter: blur(4px) saturate(140%);
    /*box-shadow: 0 4px 12px rgba(0,0,0,0.45), inset 0 0 0 1px rgba(255,255,255,0.08);*/
    white-space: nowrap;
}
.hero-countries .country-pill:hover {
    background: rgba(255,255,255,0.18);
    color: #fff;
}

/* Мобильная адаптация для мета-блока */
@media (max-width: 480px) {
    .hero-meta { gap: 0.6rem; }
    .hero-countries .country-pill {
        font-size: 0.65rem;
        padding: 0.3rem 0.6rem;
    }
}

/* {added} оптимизация сглаживания прокрутки во время анимации */
html.hero-animating, body.hero-animating {
    scroll-behavior: auto; /* отключаем встроенный smooth, чтобы не конфликтовать с JS */
    cursor: grab;
}
html.hero-animating:active, body.hero-animating:active {
    cursor: grabbing;
}
